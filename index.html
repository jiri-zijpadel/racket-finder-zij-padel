<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Najdi svou ideÃ¡lnÃ­ padel raketu | Å½ij padel!</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<script src="quiz-map.js"></script>
</head>
<body>
<div class="zp-wrapper">
  <header class="zp-header">
    <h1>ğŸ¾ Najdi ideÃ¡lnÃ­ padelovou raketu</h1>
    <p class="zp-sub">OdpovÄ›z na pÃ¡r otÃ¡zek a my ti doporuÄÃ­me raketu, kterÃ¡ sedne pÅ™esnÄ› tvÃ©mu stylu hry.</p>
  </header>

  <form id="zp-quiz-form" class="zp-quiz">
    <section class="zp-step active" data-step="1">
      <h3>Kolik ti je let?</h3>
      <div class="zp-options">
        <label><input type="radio" name="vek" value="DospÄ›lÃ½ (16â€“59)"> DospÄ›lÃ½ (16â€“59)</label>
        <label><input type="radio" name="vek" value="Senior (60+)"> Senior (60+)</label>
        <label><input type="radio" name="vek" value="Junior (10â€“15)"> Junior (10â€“15)</label>
        <label><input type="radio" name="vek" value="DÃ­tÄ› (<9)"> DÃ­tÄ› (&lt;9)</label>
      </div>
      <button type="button" class="zp-btn next">PokraÄovat</button>
    </section>

    <section class="zp-step" data-step="2">
      <h3>Jsi muÅ¾ nebo Å¾ena?</h3>
      <div class="zp-options">
        <label><input type="radio" name="pohlavi" value="MuÅ¾"> MuÅ¾</label>
        <label><input type="radio" name="pohlavi" value="Å½ena"> Å½ena</label>
      </div>
      <div class="zp-nav">
        <button type="button" class="zp-btn back">ZpÄ›t</button>
        <button type="button" class="zp-btn next">PokraÄovat</button>
      </div>
    </section>

    <section class="zp-step" data-step="3">
      <h3>Jak Äasto hrajeÅ¡ padel?</h3>
      <div class="zp-options">
        <label><input type="radio" name="frekvence" value="1â€“2Ã— mÄ›sÃ­ÄnÄ›"> 1â€“2Ã— mÄ›sÃ­ÄnÄ›</label>
        <label><input type="radio" name="frekvence" value="1â€“2Ã— tÃ½dnÄ›"> 1â€“2Ã— tÃ½dnÄ›</label>
        <label><input type="radio" name="frekvence" value="3+ tÃ½dnÄ›"> 3+ tÃ½dnÄ›</label>
      </div>
      <div class="zp-nav">
        <button type="button" class="zp-btn back">ZpÄ›t</button>
        <button type="button" class="zp-btn next">PokraÄovat</button>
      </div>
    </section>

    <section class="zp-step" data-step="4">
      <h3>Jak bys popsal svou ÃºroveÅˆ?</h3>
      <div class="zp-options">
        <label><input type="radio" name="uroven" value="ZaÄÃ¡teÄnÃ­k"> ZaÄÃ¡teÄnÃ­k</label>
        <label><input type="radio" name="uroven" value="PokroÄilÃ½"> PokroÄilÃ½</label>
        <label><input type="radio" name="uroven" value="PokroÄilÃ½ aÅ¾ expert"> PokroÄilÃ½ aÅ¾ expert</label>
      </div>
      <div class="zp-nav">
        <button type="button" class="zp-btn back">ZpÄ›t</button>
        <button type="button" class="zp-btn next">PokraÄovat</button>
      </div>
    </section>

    <section class="zp-step" data-step="5">
      <h3>Co je pro tebe pÅ™i hÅ™e nejdÅ¯leÅ¾itÄ›jÅ¡Ã­?</h3>
      <div class="zp-options">
        <label><input type="radio" name="styl" value="Kontrolu"> Kontrola</label>
        <label><input type="radio" name="styl" value="UniverzÃ¡lnost"> UniverzÃ¡lnost</label>
        <label><input type="radio" name="styl" value="SÃ­lu"> SÃ­la</label>
      </div>
      <div class="zp-nav">
        <button type="button" class="zp-btn back">ZpÄ›t</button>
        <button type="button" class="zp-btn submit">Zobrazit doporuÄenÃ­</button>
      </div>
    </section>
  </form>

  <section id="zp-result" class="zp-result" hidden>
    <h2>ğŸ¯ DoporuÄenÃ¡ raketa</h2>
    <div class="zp-card">
      <div class="zp-card__img">
        <img id="zp-product-image" alt="DoporuÄenÃ¡ raketa">
      </div>
      <div class="zp-card__text">
        <h3 id="zp-product-name"></h3>
        <p id="zp-product-reason"></p>
        <a id="zp-product-link" href="#" target="_blank" class="zp-btn lime">Zobrazit na e-shopu</a>
      </div>
    </div>
    <button id="zp-again" class="zp-btn outline">Vyplnit znovu</button>
  </section>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('zp-quiz-form');
    const result = document.getElementById('zp-result');
    const steps = [...form.querySelectorAll('.zp-step')];
    const nameEl = result.querySelector('.zp-name');
    const reasonEl = result.querySelector('.zp-reason');
    const linkEl = result.querySelector('.zp-link');
    const imgEl = result.querySelector('.zp-image');
    let current = 0;

    const showStep = i => {
      steps.forEach((step, index) => {
        step.classList.toggle('active', index === i);
      });
    };

    const val = name => {
      const input = form.querySelector(`input[name="${name}"]:checked`);
      return input ? input.value : null;
    };

    const valid = i => !!steps[i] && [...steps[i].querySelectorAll('input[type="radio"]')].some(x => x.checked);

    form.addEventListener('click', e => {
      if (e.target.matches('.next')) {
        if (!valid(current)) return;
        current++;
        showStep(current);
      }
      if (e.target.matches('.back')) {
        current--;
        showStep(current);
      }
      if (e.target.matches('.submit')) {
        if (!valid(current)) return;
        const key = [val('vek'), val('pohlavi'), val('frekvence'), val('uroven'), val('styl')]
          .map(v => v?.trim())
          .join('|');
        const rec = QUIZ_MAP[key];
        form.style.display = 'none';
        result.hidden = false;

        if (rec) {
          nameEl.textContent = rec.name || 'DoporuÄenÃ¡ raketa';
          reasonEl.textContent = rec.reason || 'Tato raketa ti nejlÃ©pe sedne podle tvÃ©ho hernÃ­ho stylu.';
          linkEl.href = (rec.utm && rec.utm.startsWith('http')) ?
            rec.utm :
            (rec.url && rec.url.startsWith('http')) ?
            rec.url :
            '#';
          if (rec.image && rec.image.startsWith('http')) {
            imgEl.src = rec.image.replace(/^\"+|\"+$/g, '');
            imgEl.style.display = 'block';
          } else {
            imgEl.style.display = 'none';
          }
        } else {
          nameEl.textContent = 'ZatÃ­m nemÃ¡me pÅ™iÅ™azenou raketu.';
          reasonEl.textContent = 'Zkus prosÃ­m jinou kombinaci odpovÄ›dÃ­.';
          linkEl.style.display = 'none';
          imgEl.style.display = 'none';
        }
      }
    });
  });
</script>
</body>
</html>
